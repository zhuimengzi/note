## JavaScript语言精髓与编程实践

### 世界需要一种什么样的语言

> 一种语言只是一种思想的表现，而不是思想本身。

语言只是一种工具，而不是根本目的，目的在于最终解决问题。

> 特性众多、适应性强，就是将来语言的特点吗？我们知道现在的C#与Java都在向这条道路前进。与特定的系统相关，就是语言的出路吗？例如曾经的VC++，以及它面向不同的平台的版本。当然，在类似的领域中，还有C，以及汇编等等……

语言作为一个工具只是简化我们的开发~~，因为计算机也是看不懂我们写的代码的，最终还得转换。~~我觉得语言只是帮助人类解决某些问题的一个手段，而不是最终的目的，当有一天人类不再需要解决某些问题了，一些语言自然就淘汰了，不是语言选择人类，而是人类选择语言。

> 我们回顾这样的例举，其实都是在特定环境下的特定语言，所不同的无非是环境的大小。这其实也是程序员的心病：我们到底选Windows平台，还是Java平台，或者Linux系统，再或者是……我们总是在不同的厂商及其支持的平台中选择，而最终这种选择又决定了我们所使用的语言。这与喜好无关，也与语言的好坏无关，不过是一种趋利的选择罢了。所以，也许你是在使用着的只是一种“并不那么‘好’”，以及并不能令你那么开心地编程的语言。你越发辛勤地工作，越发地为这些语言摇旗鼓噪，你也就离语言的真相越来越远。

在不同环境下会决定你使用不同的语言，比如在浏览器中你就需要使用javascript，在服务器端你可能就会使用java、php等。

> 语言有些很纯粹，有些则以混杂著称。如果编程世界只有一种语言，无论它何等复杂，也必因毫无比较而显得足够纯粹。所以只有在多种语言之间比较，才会有纯粹或混杂这样的效果：纯粹与混杂总是以一种或多种分类法为背景来描述的。

纯粹（单一），混杂（如：javascript很多特点来源于不同的语言）。

> 我们需要从纯化的语言中领悟到我们的编程的本质，并以混杂的语言来创造我们的世界。我看到：局部的、纯化的语言可能带来独特的性质，而从全局来看，世界是因为混杂而变得有声有色。如果上帝不说“要有光”，那么我们将不能了解世象之表；而世象有了表面，便有了混杂的色彩，我们便看不见光之外的一切事物。我们依赖于光明，而事实是光明遮住了黑暗。

语言多了导致我们沉迷于细枝末节，而忽略了语言的本质，可这本质又是多么枯燥，还是让它们混合一体吧。

### 我的程序语言实践

所有的语言效果、语法以及二进制的执行能力，不过是操作系统理解的一堆“可执行和可存取的数据结构”。“编译”这一过程，无非是把这些细节隐藏起来，让程序员以为自己在写一种非常高级的、逻辑的、有趣的代码，而忽视掉背后的本质部分：静态的数据与指令。

在JavaSctipt中所谓的“对象方法调用”，其本质上是函数式语言中的一个运算式。因其是一个运算式，所以能动态地解释执行。

同样的方法，可以解构所有在JavaScript有关执行系统（语句、表达式、函数等）的问题，基本上都可以归结到函数式这个范围内。换而言之：函数式这个“原子”为JavaScript提供了执行和动态执行能力。

- 所谓引用，不过是动态地找到值的一种手段
- 所谓运算，本质是针对值的运算

举个实例来说，例如：

```javascript
aWindow.width = obj.aMethod(x,y,z);
```

其中".width”运算的目的是找到一个值类型的属性；“.aMethod()”的目的是找到一个函数并调用它，然后返回某个值；“＝”运算则将某值传入某个存值的属性。

所以，根源上来说，JavaScript中的所有运算都是围绕“如何得到和使用值（类型）数据”来的。对此更深入的推论是：所有的计算系统都是围绕这一根本目的来的。

所有静态与动态语言，在本义上所追求的，无非是算法与结构的平衡——即先满足算法实现一致性，还是先满足结构实现一致性的问题。

在这十余年之中，我从动态开始，深入静态又回归动态，最终我来到了原点：程序＝算法＋结构。

### 学两种语言

> 我们学习语言其实不必太多，深入一两种就可以了。如果在一种类型的语言上翻来覆去，例如学C、Delphi、Java、C#……无非是求生存、讨生活，或者用以装点个人简历，于编程能力上提高是不大的。更多的人，因为面临太多的语言选择而浅尝辙止，多年之后仍远离程序根本，成为书写代码的机器，把书写代码的行数、程序个数或编程年限作为简历中最显要的部分。这在明眼人看来，无过是熟练的砖头工而已。

我如今回顾我对语言的学习，其实十年也就学会了两门语言：一门是命令式的，一门是说明式的。

### 分类法

> 打开一副新扑克牌， 我们总看到它被整齐地排在那里， 从 A 到 K 及大小王。 接下来，我们将它一分为二，然后交叉在一起；再分开，再交叉……但是在重新开局之前，你是否注意到：在上述过程中，牌局的复杂性其实不是由“分开”这个动作导致的，而是由“交叉”这个动作导致的。
>
> 所以分类法本身并不会导致复杂性。就如同一副新牌只有 4 套 A~K，我们可以按 13种牌面来分类，也可以按 4 种花色来分类。当你从牌盒里把它们拿出来的时候，无论它们是以哪种方式分类的，这副牌都不混乱。混乱的起因，在于你交叉了这些分类。

语言再多，如果按照静态和动态去分它也只有两种，因此不管有多少门语言它们所做的大部分是相同的。

> 看清语言的本质，而不是试图学会一门语言。

如果你想把一副牌理顺，最好的法子，是回到它的分类法上，要么从 A 到 K 整理，要么按 4 个花色整理 5 。毕竟，两种或更多种分类法作用于同一事物，只会使事物混淆而不是弄得更清楚。

### 特性

无论哪种语言（或其他工具）都有其独特的特性，以及借鉴自其他语言的特性。有些语言通体没有“独特特性” ，只是另外一种语言的副本，这更多的时候是为了“满足一些人使用语言的习惯” 。还有一些语言则基本上全是独特的特性，这可能导致语言本身不实用，但却是其他语言的思想库。

JavaScript特性：

- 一套参考过程式语言惯例的语法。
- 一套以原型继承为基础的对象系统。
- 一套支持自动转换的弱类型系统。
- 动态语言与函数式语言的基本特性。

### 技巧

技巧是“技术的取巧之处” ，所以根本上来说，技巧也是技术的一部分。很多人（也包括我）反对技巧的使用，是因为难以控制，并且容易破坏代码的可读性。

哪种情况下代码是需要“易于控制”和“可读性强”呢？通常，我们认为在较大型的工程下需要 “更好地控制代码” ； 在更多人共同开发的项目代码上要求 “更好的可读性” 。然而，反过来说，在一些更小型的、不需要更多人参与的项目中， “适度地”使用技巧是否就可以接受呢？这取决于“需要、能够”维护这个代码的人对技巧的理解。这包括：

- 技巧是一种语言特性，还是仅特定版本所支持或根本就是 BUG？
- 技巧是不是唯一可行的选择，有没有不需要技巧的实现？
- 技巧是为了实现功能，还是为了表现技巧而出现在代码中的？

语言特性的价值依赖于环境而得以彰显。横行的螃蟹看起来古怪，但据说那是为了适应一次地磁反转。