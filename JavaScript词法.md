### JavaScript词法

常常听到一个笑话，说“我英语学的可好啦，26个字母全认识！”。大家都知道，一切英文都是由26个字母组成的，为啥26个字母全认识，还不能说会英文呢？答案就是字母不是词，单独的字母是没有意义的，只有字母组成了词，才会有表达意义的能力。所以学英语的时候，最重要的是"背单词"。

别人问你，h是什么意思啊？——h没有任何意思，只有它出现在help，hello这样的词里面，h才有意义。

对计算机语言来说，每个Unicode或者ASCII字符都是没有意义的，只有它们形成了"词"，才有意义。词法由基本的token组合，可以组成表达式、语句、函数定义等语法结构，最终形成有强大表达能力的程序。

除了真正有意义的token之外,在js中有以下三种：

- WhiteSpace：空白符
- LineTerminator：行终结符
- Comments：注释

除法和正则表达式写法的冲突问题

```javascript
if(a+b)/a/g;

(a+b)/a/g;
```

可以看到完全相同的/a/g（而且前面一段字符也相同），可能被理解为除法或者正则表达式。因为必须区分所处的语法环境，所以单单靠词法分析无论如何也无法决定该用除法还是正则表达式来理解。因为基本上没有任何编辑环境会对文本做语法分析，这个问题也造成了很多语法着色系统无法很好地处理JS正则表达式。

WhiteSpace能够被去掉而完全不影响程序的执行效果。但是也有一些WhiteSpace必须存在的情况，考虑下面代码：

```javascript
1 .toString();
1.toString(); //报错
```

上面一段代码中，空白符分隔了1和.，因此它们被理解为两个token。

大部分LineTerminator在被词法分析器扫描出之后，会被语法分析器丢弃，但是换行符会影响JS的两个重要语法特性：自动插入分号和"no line terminator"规则。

考虑下面三段代码：

```javascript
var a = 1 , b = 1;
a
++
b
```

按照JS语法的自动插入分号规则，代码解释可能产生歧义。

但是因为后自增运算符有no line terminator的限制，所以实际结果等价于：

```javascript
var a = 1 , b = 1;
a;
++b;
```

一般情况下，不论是单行还是多行注释都不会影响程序的意义，但是含有LineTerminator的多行注释会影响到自动插入分号规则：

```javascript
return/*
    */123;
return /**/ 123;
```

十进制数的小数点前和小数点后均可以省略， 所以 1. 和 .1 都是合法的数字直接量，特别地，除了0之外，十进制数不能以0开头（这其实是为了八进制整数预留的）。

